<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PMAM - Sistema de Documentos Oficiais</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Estilos otimizados para GitHub Pages */
        :root {
            --pm-azul: #1e3a8a;
            --pm-azul-claro: #3b82f6;
            --pm-azul-escuro: #1e293b;
            --pm-destaque: #0ea5e9;
            --pm-verde: #10b981;
            --pm-amarelo: #f59e0b;
            --pm-vermelho: #ef4444;
            --pm-cinza: #64748b;
            --pm-cinza-claro: #f1f5f9;
            --pm-branco: #ffffff;
            --pm-borda: #e2e8f0;
            --pm-sombra: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --pm-raio: 8px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--pm-azul-escuro);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: var(--pm-branco);
            border-radius: var(--pm-raio);
            box-shadow: var(--pm-sombra);
            overflow: hidden;
        }

        /* Cabeçalho */
        .cabecalho {
            background: linear-gradient(135deg, var(--pm-azul), var(--pm-azul-claro));
            color: white;
            padding: 24px 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
        }

        .cabecalho::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .logo {
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--pm-azul);
            font-weight: bold;
            font-size: 24px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .titulos h1 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .titulos .subtitulo {
            font-size: 14px;
            opacity: 0.9;
            font-weight: 400;
        }

        .usuario {
            display: flex;
            align-items: center;
            gap: 12px;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 16px;
            border-radius: var(--pm-raio);
            backdrop-filter: blur(10px);
        }

        .avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: white;
            color: var(--pm-azul);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .detalhes-usuario h3 {
            font-size: 14px;
            font-weight: 600;
        }

        .detalhes-usuario p {
            font-size: 12px;
            opacity: 0.8;
        }

        /* Layout Principal */
        .layout-principal {
            display: grid;
            grid-template-columns: 280px 1fr;
            min-height: calc(100vh - 180px);
        }

        /* Painel Lateral */
        .painel-lateral {
            background: var(--pm-cinza-claro);
            padding: 24px;
            border-right: 1px solid var(--pm-borda);
        }

        .secao-painel {
            margin-bottom: 32px;
        }

        .secao-painel:last-child {
            margin-bottom: 0;
        }

        .titulo-secao {
            color: var(--pm-azul);
            font-size: 13px;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--pm-borda);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .titulo-secao i {
            color: var(--pm-destaque);
        }

        .lista-navegacao {
            list-style: none;
        }

        .item-navegacao {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: var(--pm-raio);
            color: var(--pm-cinza);
            text-decoration: none;
            margin-bottom: 8px;
            transition: all 0.3s;
            cursor: pointer;
            font-weight: 500;
            border: 1px solid transparent;
        }

        .item-navegacao:hover {
            background: white;
            color: var(--pm-azul);
            border-color: var(--pm-borda);
            transform: translateX(4px);
        }

        .item-navegacao.ativo {
            background: linear-gradient(135deg, var(--pm-azul), var(--pm-azul-claro));
            color: white;
            border-color: var(--pm-azul);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
        }

        .item-navegacao.ativo i {
            color: white;
        }

        .item-navegacao i {
            width: 20px;
            text-align: center;
        }

        .badge {
            margin-left: auto;
            background: var(--pm-destaque);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            min-width: 20px;
            text-align: center;
        }

        /* Botões */
        .botao {
            padding: 10px 16px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            justify-content: center;
        }

        .botao-primario {
            background: linear-gradient(135deg, var(--pm-azul), var(--pm-azul-claro));
            color: white;
        }

        .botao-primario:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(59, 130, 246, 0.3);
        }

        .botao-secundario {
            background: white;
            color: var(--pm-azul);
            border: 2px solid var(--pm-borda);
        }

        .botao-secundario:hover {
            background: var(--pm-cinza-claro);
        }

        .botao-sucesso {
            background: var(--pm-verde);
            color: white;
        }

        .botao-perigo {
            background: var(--pm-vermelho);
            color: white;
        }

        .grupo-botoes {
            display: flex;
            gap: 12px;
            margin-top: 24px;
            flex-wrap: wrap;
        }

        /* Área de Conteúdo */
        .area-conteudo {
            padding: 32px;
            background: white;
        }

        /* Abas */
        .abas {
            display: flex;
            gap: 2px;
            margin-bottom: 24px;
            border-bottom: 2px solid var(--pm-borda);
            overflow-x: auto;
        }

        .aba {
            padding: 12px 20px;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: 600;
            color: var(--pm-cinza);
            transition: all 0.3s;
            white-space: nowrap;
            font-size: 14px;
        }

        .aba:hover {
            color: var(--pm-destaque);
        }

        .aba.ativo {
            color: var(--pm-azul);
            border-bottom-color: var(--pm-destaque);
            background: linear-gradient(to bottom, rgba(14, 165, 233, 0.05), transparent);
        }

        /* Cartão de Conteúdo */
        .cartao-conteudo {
            background: white;
            border-radius: var(--pm-raio);
            padding: 24px;
            box-shadow: var(--pm-sombra);
            margin-bottom: 24px;
        }

        .cartao-conteudo:last-child {
            margin-bottom: 0;
        }

        /* Formulários */
        .grupo-form {
            margin-bottom: 20px;
        }

        .grupo-form label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            color: var(--pm-azul-escuro);
            margin-bottom: 6px;
        }

        .grupo-form label.obrigatorio::after {
            content: " *";
            color: var(--pm-vermelho);
        }

        .controle-form {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid var(--pm-borda);
            border-radius: 6px;
            font-size: 14px;
            transition: all 0.3s;
            background: white;
        }

        .controle-form:focus {
            outline: none;
            border-color: var(--pm-destaque);
            box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
        }

        textarea.controle-form {
            min-height: 120px;
            resize: vertical;
            font-family: inherit;
        }

        .linha-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 16px;
        }

        @media (max-width: 768px) {
            .linha-form {
                grid-template-columns: 1fr;
            }
        }

        /* Pré-visualização */
        .cabecalho-previa {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 2px solid var(--pm-borda);
        }

        .cabecalho-previa h2 {
            color: var(--pm-azul);
            font-size: 20px;
            font-weight: 700;
        }

        .acoes-previa {
            display: flex;
            gap: 12px;
        }

        .previa-documento {
            background: var(--pm-cinza-claro);
            border: 2px solid var(--pm-borda);
            border-radius: 6px;
            padding: 32px;
            font-family: 'Times New Roman', Times, serif;
            max-height: 600px;
            overflow-y: auto;
            line-height: 1.8;
        }

        .previa-documento h1 {
            text-align: center;
            margin-bottom: 32px;
            color: var(--pm-azul-escuro);
            font-size: 22px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .previa-documento h2 {
            text-align: center;
            margin-bottom: 24px;
            color: var(--pm-azul-escuro);
            font-size: 18px;
            border-bottom: 1px solid var(--pm-borda);
            padding-bottom: 12px;
        }

        .previa-documento h3 {
            color: var(--pm-azul-escuro);
            margin-top: 24px;
            margin-bottom: 12px;
            font-size: 16px;
        }

        .previa-documento p {
            margin-bottom: 16px;
            text-align: justify;
        }

        .previa-documento .assinatura {
            margin-top: 80px;
            text-align: center;
        }

        .previa-documento .linha-assinatura {
            border-top: 1px solid var(--pm-azul-escuro);
            width: 300px;
            margin: 40px auto 8px;
        }

        /* Alerta */
        .alerta {
            padding: 16px;
            border-radius: 6px;
            margin-bottom: 24px;
            border-left: 4px solid;
            background: var(--pm-cinza-claro);
        }

        .alerta-info {
            border-left-color: var(--pm-destaque);
            background: #eff6ff;
        }

        .alerta-sucesso {
            border-left-color: var(--pm-verde);
            background: #d1fae5;
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--pm-azul-escuro);
            color: white;
            padding: 12px 20px;
            border-radius: var(--pm-raio);
            box-shadow: var(--pm-sombra);
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 1000;
            transform: translateX(100%);
            opacity: 0;
            transition: all 0.3s;
        }

        .toast.mostrar {
            transform: translateX(0);
            opacity: 1;
        }

        .toast-sucesso {
            background: var(--pm-verde);
        }

        .toast-erro {
            background: var(--pm-vermelho);
        }

        /* Responsivo */
        @media (max-width: 1024px) {
            .layout-principal {
                grid-template-columns: 1fr;
            }
            
            .painel-lateral {
                display: none;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .cabecalho {
                flex-direction: column;
                gap: 16px;
                text-align: center;
            }
            
            .usuario {
                align-self: stretch;
                justify-content: center;
            }
            
            .area-conteudo {
                padding: 20px;
            }
            
            .grupo-botoes {
                flex-direction: column;
            }
            
            .grupo-botoes .botao {
                width: 100%;
            }
        }

        @media print {
            .painel-lateral, .abas, .cabecalho-previa, .botao {
                display: none !important;
            }
            
            .previa-documento {
                border: none;
                padding: 0;
                max-height: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Cabeçalho -->
        <header class="cabecalho">
            <div class="logo-container">
                <div class="logo">PM</div>
                <div class="titulos">
                    <h1>PMAM - Sistema de Documentos</h1>
                    <p class="subtitulo">Geração automática de procedimentos administrativos</p>
                </div>
            </div>
            <div class="usuario">
                <div class="avatar">OP</div>
                <div class="detalhes-usuario">
                    <h3>Maj QOPM Olavo Pereira</h3>
                    <p>Encarregado de Procedimentos</p>
                </div>
            </div>
        </header>

        <!-- Layout Principal -->
        <div class="layout-principal">
            <!-- Painel Lateral -->
            <aside class="painel-lateral">
                <div class="secao-painel">
                    <h3 class="titulo-secao"><i class="fas fa-folder"></i> Procedimentos</h3>
                    <ul class="lista-navegacao">
                        <li>
                            <a class="item-navegacao ativo" data-aba="formulario">
                                <i class="fas fa-file-invoice"></i>
                                Formulário
                                <span class="badge">3</span>
                            </a>
                        </li>
                        <li>
                            <a class="item-navegacao" data-aba="previa">
                                <i class="fas fa-eye"></i>
                                Pré-visualização
                            </a>
                        </li>
                        <li>
                            <a class="item-navegacao" data-aba="modelos">
                                <i class="fas fa-copy"></i>
                                Modelos
                            </a>
                        </li>
                        <li>
                            <a class="item-navegacao" data-aba="historico">
                                <i class="fas fa-history"></i>
                                Histórico
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="secao-painel">
                    <h3 class="titulo-secao"><i class="fas fa-bolt"></i> Ações Rápidas</h3>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <button class="botao botao-primario" id="btn-gerar-tudo">
                            <i class="fas fa-file-export"></i> Gerar Todos
                        </button>
                        <button class="botao botao-secundario" id="btn-limpar-form">
                            <i class="fas fa-eraser"></i> Limpar
                        </button>
                        <button class="botao botao-sucesso" id="btn-salvar">
                            <i class="fas fa-save"></i> Salvar
                        </button>
                    </div>
                </div>

                <div class="secao-painel">
                    <h3 class="titulo-secao"><i class="fas fa-info-circle"></i> Informações</h3>
                    <div style="font-size: 12px; color: var(--pm-cinza); line-height: 1.5;">
                        <p><strong>Versão:</strong> 2.1.0</p>
                        <p><strong>Última atualização:</strong> 10/12/2024</p>
                        <p><strong>Documentos gerados:</strong> 47</p>
                    </div>
                </div>
            </aside>

            <!-- Área de Conteúdo -->
            <main class="area-conteudo">
                <!-- Abas -->
                <div class="abas">
                    <button class="aba ativo" data-aba="formulario">Formulário</button>
                    <button class="aba" data-aba="previa">Pré-visualização</button>
                    <button class="aba" data-aba="modelos">Modelos</button>
                    <button class="aba" data-aba="historico">Histórico</button>
                </div>

                <!-- Alerta -->
                <div class="alerta alerta-info">
                    <i class="fas fa-info-circle"></i> Preencha todos os campos obrigatórios (*) e clique em "Gerar Documentos" para criar os documentos oficiais.
                </div>

                <!-- Aba: Formulário -->
                <div class="cartao-conteudo conteudo-aba ativo" id="aba-formulario">
                    <h2 style="color: var(--pm-azul); margin-bottom: 24px;">Formulário de Procedimento</h2>
                    
                    <div class="grupo-form">
                        <label class="obrigatorio">Tipo de Procedimento</label>
                        <select class="controle-form" id="tipo-procedimento">
                            <option value="SINV">Sindicância Investigativa</option>
                            <option value="IPM">Inquérito Policial Militar</option>
                            <option value="SD">Sindicância Disciplinar</option>
                        </select>
                    </div>

                    <div class="linha-form">
                        <div class="grupo-form">
                            <label class="obrigatorio">Número da Portaria</label>
                            <input type="text" class="controle-form" id="numero-portaria" 
                                   placeholder="Ex: 004.07/SJD/SIND.INVEST/CPA CENTRO-SUL">
                        </div>
                        <div class="grupo-form">
                            <label class="obrigatorio">Data da Portaria</label>
                            <input type="date" class="controle-form" id="data-portaria">
                        </div>
                    </div>

                    <div class="linha-form">
                        <div class="grupo-form">
                            <label class="obrigatorio">Unidade/OM</label>
                            <input type="text" class="controle-form" id="unidade" 
                                   placeholder="Ex: CPA CENTRO-SUL">
                        </div>
                        <div class="grupo-form">
                            <label class="obrigatorio">Cidade</label>
                            <input type="text" class="controle-form" id="cidade" value="Manaus">
                        </div>
                    </div>

                    <h3 style="color: var(--pm-azul); margin: 32px 0 16px; padding-bottom: 8px; border-bottom: 2px solid var(--pm-borda);">
                        <i class="fas fa-user-tie"></i> Encarregado/Sindicante
                    </h3>

                    <div class="linha-form">
                        <div class="grupo-form">
                            <label class="obrigatorio">Posto/Graduação</label>
                            <select class="controle-form" id="posto-encarregado">
                                <option value="MAJ QOPM">MAJ QOPM</option>
                                <option value="CAP QOPM">CAP QOPM</option>
                                <option value="1º TEN QOPM">1º TEN QOPM</option>
                                <option value="2º TEN QOPM">2º TEN QOPM</option>
                                <option value="CEL QOPM">CEL QOPM</option>
                            </select>
                        </div>
                        <div class="grupo-form">
                            <label class="obrigatorio">Nome Completo</label>
                            <input type="text" class="controle-form" id="nome-encarregado" 
                                   placeholder="Ex: Olavo Pereira da Silva Filho">
                        </div>
                        <div class="grupo-form">
                            <label class="obrigatorio">Número de Identificação</label>
                            <input type="text" class="controle-form" id="id-encarregado" 
                                   placeholder="Ex: 15974">
                        </div>
                    </div>

                    <h3 style="color: var(--pm-azul); margin: 32px 0 16px; padding-bottom: 8px; border-bottom: 2px solid var(--pm-borda);">
                        <i class="fas fa-user-shield"></i> Sindicado/Indiciado
                    </h3>

                    <div class="linha-form">
                        <div class="grupo-form">
                            <label>Posto/Graduação</label>
                            <select class="controle-form" id="posto-sindicado">
                                <option value="">Selecionar</option>
                                <option value="CAP QOPM">CAP QOPM</option>
                                <option value="1º TEN QOPM">1º TEN QOPM</option>
                                <option value="ST QPPM">ST QPPM</option>
                                <option value="CB QPPM">CB QPPM</option>
                            </select>
                        </div>
                        <div class="grupo-form">
                            <label>Nome Completo</label>
                            <input type="text" class="controle-form" id="nome-sindicado" 
                                   placeholder="Ex: Rômulo Botelho dos Santos">
                        </div>
                        <div class="grupo-form">
                            <label>Número de Identificação</label>
                            <input type="text" class="controle-form" id="id-sindicado" 
                                   placeholder="Ex: 20765">
                        </div>
                    </div>

                    <h3 style="color: var(--pm-azul); margin: 32px 0 16px; padding-bottom: 8px; border-bottom: 2px solid var(--pm-borda);">
                        <i class="fas fa-file-alt"></i> Descrição dos Fatos
                    </h3>

                    <div class="grupo-form">
                        <label class="obrigatorio">Relato dos Fatos</label>
                        <textarea class="controle-form" id="resumo-fatos" rows="6" 
                                  placeholder="Descreva detalhadamente os fatos que motivaram a instauração do procedimento..."></textarea>
                    </div>

                    <div class="linha-form">
                        <div class="grupo-form">
                            <label>Data do Fato</label>
                            <input type="date" class="controle-form" id="data-fato">
                        </div>
                        <div class="grupo-form">
                            <label>Local do Fato</label>
                            <input type="text" class="controle-form" id="local-fato" 
                                   placeholder="Ex: Boate Root, Rua Barão de Indaiá">
                        </div>
                        <div class="grupo-form">
                            <label>Horário</label>
                            <input type="text" class="controle-form" id="hora-fato" 
                                   placeholder="Ex: 04:30h">
                        </div>
                    </div>

                    <div class="grupo-botoes">
                        <button class="botao botao-primario" id="btn-gerar-docs">
                            <i class="fas fa-file-export"></i> Gerar Documentos
                        </button>
                        <button class="botao botao-secundario" id="btn-validar">
                            <i class="fas fa-check-circle"></i> Validar Dados
                        </button>
                        <button class="botao botao-sucesso" id="btn-carregar-modelo">
                            <i class="fas fa-upload"></i> Carregar Modelo
                        </button>
                    </div>
                </div>

                <!-- Aba: Pré-visualização -->
                <div class="cartao-conteudo conteudo-aba" id="aba-previa">
                    <div class="cabecalho-previa">
                        <h2>Pré-visualização do Documento</h2>
                        <div class="acoes-previa">
                            <select class="controle-form" id="selecionar-documento" style="width: 200px;">
                                <option value="termo-abertura">Termo de Abertura</option>
                                <option value="termo-declaracao">Termo de Declaração</option>
                                <option value="oficio">Ofício</option>
                                <option value="carta-precatoria">Carta Precatória</option>
                                <option value="relatorio">Relatório Final</option>
                                <option value="parecer">Parecer</option>
                            </select>
                            <button class="botao botao-primario" id="btn-exportar">
                                <i class="fas fa-download"></i> Exportar
                            </button>
                            <button class="botao botao-secundario" id="btn-imprimir">
                                <i class="fas fa-print"></i> Imprimir
                            </button>
                        </div>
                    </div>
                    <div class="previa-documento" id="previa-documento">
                        <p style="text-align: center; color: var(--pm-cinza); padding: 40px;">
                            <i class="fas fa-file-alt" style="font-size: 48px; margin-bottom: 20px; display: block; opacity: 0.3;"></i>
                            Selecione um documento para visualização
                        </p>
                    </div>
                </div>

                <!-- Aba: Modelos -->
                <div class="cartao-conteudo conteudo-aba" id="aba-modelos">
                    <h2 style="color: var(--pm-azul); margin-bottom: 24px;">Modelos de Documentos</h2>
                    
                    <div class="alerta alerta-info">
                        <i class="fas fa-lightbulb"></i> Clique em um modelo para carregar automaticamente todos os dados no formulário.
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-top: 24px;">
                        <div class="modelo-card" style="border: 2px solid var(--pm-borda); border-radius: var(--pm-raio); padding: 20px; cursor: pointer; transition: all 0.3s;" 
                             data-modelo="sindicancia-botelho" onclick="carregarModelo('sindicancia-botelho')">
                            <h3 style="color: var(--pm-azul); margin-bottom: 12px;">
                                <i class="fas fa-file-contract"></i> Sindicância Cap. Botelho
                            </h3>
                            <p style="font-size: 14px; color: var(--pm-cinza); margin-bottom: 16px;">
                                Sindicância Investigativa para apurar conduta de policial militar envolvido em ocorrência com PRFs em boate.
                            </p>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="background: var(--pm-verde); color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px;">
                                    Completo
                                </span>
                                <span style="font-size: 12px; color: var(--pm-cinza);">
                                    <i class="fas fa-calendar"></i> Set/2021
                                </span>
                            </div>
                        </div>
                        
                        <div class="modelo-card" style="border: 2px solid var(--pm-borda); border-radius: var(--pm-raio); padding: 20px; cursor: pointer; transition: all 0.3s;" 
                             data-modelo="sindicancia-daivison" onclick="carregarModelo('sindicancia-daivison')">
                            <h3 style="color: var(--pm-azul); margin-bottom: 12px;">
                                <i class="fas fa-file-contract"></i> Sindicância Cap. Daivison
                            </h3>
                            <p style="font-size: 14px; color: var(--pm-cinza); margin-bottom: 16px;">
                                Sindicância Investigativa para apurar suposta agressão física durante abordagem policial.
                            </p>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="background: var(--pm-verde); color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px;">
                                    Completo
                                </span>
                                <span style="font-size: 12px; color: var(--pm-cinza);">
                                    <i class="fas fa-calendar"></i> Jun/2023
                                </span>
                            </div>
                        </div>
                        
                        <div class="modelo-card" style="border: 2px solid var(--pm-borda); border-radius: var(--pm-raio); padding: 20px; cursor: pointer; transition: all 0.3s;" 
                             data-modelo="ipm-stanley" onclick="carregarModelo('ipm-stanley')">
                            <h3 style="color: var(--pm-azul); margin-bottom: 12px;">
                                <i class="fas fa-gavel"></i> IPM 1º Ten. Stanley
                            </h3>
                            <p style="font-size: 14px; color: var(--pm-cinza); margin-bottom: 16px;">
                                Inquérito Policial Militar instaurado para apurar conduta de policial militar.
                            </p>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="background: var(--pm-amarelo); color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px;">
                                    Em andamento
                                </span>
                                <span style="font-size: 12px; color: var(--pm-cinza);">
                                    <i class="fas fa-calendar"></i> Mar/2023
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Aba: Histórico -->
                <div class="cartao-conteudo conteudo-aba" id="aba-historico">
                    <h2 style="color: var(--pm-azul); margin-bottom: 24px;">Histórico de Documentos</h2>
                    
                    <div class="alerta alerta-sucesso">
                        <i class="fas fa-database"></i> Sistema de armazenamento local ativo. Seus documentos são salvos automaticamente.
                    </div>
                    
                    <div id="lista-historico" style="margin-top: 24px;">
                        <p style="text-align: center; color: var(--pm-cinza); padding: 20px;">
                            <i class="fas fa-history" style="font-size: 36px; margin-bottom: 16px; display: block; opacity: 0.3;"></i>
                            Nenhum documento gerado ainda
                        </p>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toast-mensagem">Operação realizada com sucesso!</span>
    </div>

    <script>
        // Sistema PMAM - Geração de Documentos
        class SistemaPMAM {
            constructor() {
                this.modelos = {
                    'sindicancia-botelho': {
                        'tipo-procedimento': 'SINV',
                        'numero-portaria': '004.07/SJD/SIND.INVEST/CPA CENTRO-SUL',
                        'data-portaria': '2021-08-31',
                        'unidade': 'CPA CENTRO-SUL',
                        'cidade': 'Manaus',
                        'posto-encarregado': 'MAJ QOPM',
                        'nome-encarregado': 'OLAVO PEREIRA DA SILVA FILHO',
                        'id-encarregado': '15974',
                        'posto-sindicado': 'CAP QOPM',
                        'nome-sindicado': 'RÔMULO BOTELHO DOS SANTOS',
                        'id-sindicado': '20765',
                        'resumo-fatos': 'Trata-se de Sindicância investigativa com finalidade de apurar conduta de policial militar envolvido em ocorrência com Policiais Rodoviários Federais em boate na cidade de Manaus-AM, ocorrida no dia 18 de setembro de 2020. Segundo o que foi apurado, o CAP QOPM ROMULO BOTELHO DOS SANTOS encontrava-se juntamente com um grupo de amigos se divertindo na boate quando dois Policiais Rodoviários Federais começaram uma confusão dentro da boate após estes supostamente tentarem assediar uma conhecida sua.',
                        'data-fato': '2020-09-18',
                        'local-fato': 'Boate Root, Rua Barão de Indaiá',
                        'hora-fato': '04:30h'
                    },
                    'sindicancia-daivison': {
                        'tipo-procedimento': 'SINV',
                        'numero-portaria': '011/SIND INVEST/SJD/CPM/2023',
                        'data-portaria': '2023-06-12',
                        'unidade': 'CPA OESTE',
                        'cidade': 'Manaus',
                        'posto-encarregado': 'MAJ QOPM',
                        'nome-encarregado': 'OLAVO PEREIRA DA SILVA FILHO',
                        'id-encarregado': '15974',
                        'posto-sindicado': 'CAP QOPM',
                        'nome-sindicado': 'DAIVISON ANDERSON CUTRIM SOEIRO',
                        'id-sindicado': '20900',
                        'resumo-fatos': 'Sindicância Investigativa instaurada para apurar suposta conduta irregular praticada por policiais militares sob comando do Cap QOPM Daivison Anderson Cutrim Soeiro, suposta agressão física, ocorrida no dia 10 de março de 2023, durante abordagem, por volta das 14 horas, após denúncia de tráfico de drogas, na rua Dr. Ademar, nº 61, bairro Zumbi dos Palmares.',
                        'data-fato': '2023-03-10',
                        'local-fato': 'Rua Dr. Ademar, nº 61, bairro Zumbi dos Palmares',
                        'hora-fato': '14:00h'
                    },
                    'ipm-stanley': {
                        'tipo-procedimento': 'IPM',
                        'numero-portaria': '05.02/2023/IPM/SJD/CPA OESTE/PMAM',
                        'data-portaria': '2023-02-23',
                        'unidade': 'CPA OESTE',
                        'cidade': 'Manaus',
                        'posto-encarregado': 'MAJ QOPM',
                        'nome-encarregado': 'OLAVO PEREIRA DA SILVA FILHO',
                        'id-encarregado': '15974',
                        'posto-sindicado': '1º TEN QOPM',
                        'nome-sindicado': 'STANLEY OLIVEIRA DE ARAÚJO',
                        'id-sindicado': '20943',
                        'resumo-fatos': 'Inquérito Policial Militar instaurado para apurar conduta de policial militar envolvido em ocorrência registrada, conforme portaria em referência. O presente procedimento tem como objetivo apurar os fatos e circunstâncias relacionadas à atuação do indiciado.',
                        'data-fato': '2023-02-15',
                        'local-fato': 'A ser apurado',
                        'hora-fato': 'A ser apurado'
                    }
                };
                
                this.documentosGerados = {};
                this.config = {
                    autoSave: true,
                    dateFormat: 'dd/mm/yyyy'
                };
                
                this.init();
            }
            
            init() {
                this.configurarDatas();
                this.configurarEventos();
                this.carregarConfig();
                this.atualizarHistorico();
            }
            
            configurarDatas() {
                const hoje = new Date().toISOString().split('T')[0];
                document.getElementById('data-portaria').value = hoje;
                document.getElementById('data-instauracao')?.value = hoje;
                document.getElementById('data-fato').value = hoje;
            }
            
            configurarEventos() {
                // Navegação por abas
                document.querySelectorAll('.aba').forEach(aba => {
                    aba.addEventListener('click', (e) => {
                        const abaId = e.target.getAttribute('data-aba');
                        this.mudarAba(abaId);
                    });
                });
                
                // Navegação lateral
                document.querySelectorAll('.item-navegacao').forEach(item => {
                    item.addEventListener('click', (e) => {
                        const abaId = e.currentTarget.getAttribute('data-aba');
                        this.mudarAba(abaId);
                    });
                });
                
                // Botões principais
                document.getElementById('btn-gerar-docs').addEventListener('click', () => this.gerarDocumentos());
                document.getElementById('btn-validar').addEventListener('click', () => this.validarFormulario());
                document.getElementById('btn-carregar-modelo').addEventListener('click', () => this.carregarModeloDialog());
                document.getElementById('btn-gerar-tudo').addEventListener('click', () => this.gerarDocumentos());
                document.getElementById('btn-limpar-form').addEventListener('click', () => this.limparFormulario());
                document.getElementById('btn-salvar').addEventListener('click', () => this.salvarRascunho());
                document.getElementById('btn-exportar').addEventListener('click', () => this.exportarDocumento());
                document.getElementById('btn-imprimir').addEventListener('click', () => window.print());
                
                // Seleção de documento na prévia
                document.getElementById('selecionar-documento').addEventListener('change', (e) => {
                    this.previsualizarDocumento(e.target.value);
                });
                
                // Auto-salvamento
                if (this.config.autoSave) {
                    document.querySelectorAll('#aba-formulario input, #aba-formulario select, #aba-formulario textarea').forEach(input => {
                        input.addEventListener('change', () => this.autoSalvar());
                    });
                }
            }
            
            mudarAba(abaId) {
                // Atualizar abas
                document.querySelectorAll('.aba').forEach(aba => {
                    aba.classList.remove('ativo');
                });
                document.querySelector(`.aba[data-aba="${abaId}"]`)?.classList.add('ativo');
                
                // Atualizar navegação lateral
                document.querySelectorAll('.item-navegacao').forEach(item => {
                    item.classList.remove('ativo');
                });
                document.querySelector(`.item-navegacao[data-aba="${abaId}"]`)?.classList.add('ativo');
                
                // Mostrar conteúdo da aba
                document.querySelectorAll('.conteudo-aba').forEach(conteudo => {
                    conteudo.classList.remove('ativo');
                });
                document.getElementById(`aba-${abaId}`).classList.add('ativo');
                
                // Ações específicas por aba
                if (abaId === 'previa' && Object.keys(this.documentosGerados).length === 0) {
                    this.previsualizarDocumento('termo-abertura');
                }
            }
            
            obterDadosFormulario() {
                const dados = {};
                const campos = ['tipo-procedimento', 'numero-portaria', 'data-portaria', 'unidade', 'cidade',
                              'posto-encarregado', 'nome-encarregado', 'id-encarregado',
                              'posto-sindicado', 'nome-sindicado', 'id-sindicado',
                              'resumo-fatos', 'data-fato', 'local-fato', 'hora-fato'];
                
                campos.forEach(campo => {
                    const elemento = document.getElementById(campo);
                    if (elemento) {
                        dados[campo] = elemento.value;
                    }
                });
                
                return dados;
            }
            
            validarFormulario() {
                const camposObrigatorios = [
                    'tipo-procedimento',
                    'numero-portaria',
                    'data-portaria',
                    'unidade',
                    'cidade',
                    'posto-encarregado',
                    'nome-encarregado',
                    'id-encarregado',
                    'resumo-fatos'
                ];
                
                let valido = true;
                const camposFaltando = [];
                
                camposObrigatorios.forEach(campoId => {
                    const campo = document.getElementById(campoId);
                    if (!campo || !campo.value.trim()) {
                        valido = false;
                        camposFaltando.push(campoId.replace('-', ' '));
                        if (campo) {
                            campo.style.borderColor = 'var(--pm-vermelho)';
                        }
                    } else if (campo) {
                        campo.style.borderColor = '';
                    }
                });
                
                if (valido) {
                    this.mostrarToast('Formulário validado com sucesso!', 'sucesso');
                } else {
                    this.mostrarToast(`Campos obrigatórios faltando: ${camposFaltando.join(', ')}`, 'erro');
                }
                
                return valido;
            }
            
            formatarData(dataStr, formato = 'extenso') {
                if (!dataStr) return '______';
                
                const data = new Date(dataStr + 'T00:00:00');
                const dia = data.getDate();
                const mes = data.getMonth() + 1;
                const ano = data.getFullYear();
                
                if (formato === 'extenso') {
                    const meses = [
                        'janeiro', 'fevereiro', 'março', 'abril', 'maio', 'junho',
                        'julho', 'agosto', 'setembro', 'outubro', 'novembro', 'dezembro'
                    ];
                    return `${dia} dias do mês de ${meses[mes-1]} do ano de ${ano}`;
                } else {
                    return `${String(dia).padStart(2, '0')}/${String(mes).padStart(2, '0')}/${ano}`;
                }
            }
            
            gerarTermoAbertura(dados) {
                const tipo = dados['tipo-procedimento'] === 'IPM' ? 'INQUÉRITO POLICIAL MILITAR' : 
                           dados['tipo-procedimento'] === 'SD' ? 'SINDICÂNCIA DISCIPLINAR' : 
                           'SINDICÂNCIA INVESTIGATIVA';
                
                return `
                    <h1>TERMO DE ABERTURA</h1>
                    
                    <p>Aos ${this.formatarData(dados['data-portaria'])}, nesta cidade de ${dados.cidade || 'Manaus'}, Estado do Amazonas, na ${dados.unidade || 'Unidade'}, dou início a presente ${tipo} do que para constar lavro o presente termo.</p>
                    
                    <p>Fundamento legal: Código de Processo Penal Militar (Decreto-Lei nº 1.002/1969), Lei Estadual nº 3.278/2008 (Estatuto da Polícia Militar do Amazonas) e demais normas internas aplicáveis.</p>
                    
                    <p>Designa-se, para as providências iniciais, o(a) escrivão(ã) e demais membros, quando houver, conforme necessidade.</p>
                    
                    <div class="assinatura">
                        <div class="linha-assinatura"></div>
                        <strong>${dados['posto-encarregado']} ${dados['nome-encarregado']}</strong><br>
                        ${dados['tipo-procedimento'] === 'IPM' ? 'Encarregado do Inquérito Policial Militar' : 'Sindicante'}
                    </div>
                `;
            }
            
            gerarTermoDeclaracao(dados) {
                return `
                    <h1>TERMO DE DECLARAÇÃO</h1>
                    
                    <p>Aos ${this.formatarData(dados['data-portaria'])}, nesta cidade de ${dados.cidade || 'Manaus'}, Estado do Amazonas, no Comando de Policiamento da Área Centro-Sul, compareceu para inquirição o declarante qualificado abaixo.</p>
                    
                    <h3>QUALIFICAÇÃO:</h3>
                    <p>Nome: ${dados['nome-sindicado'] || '________________'}<br>
                    Posto/Graduação: ${dados['posto-sindicado'] || '________________'}<br>
                    Número de Identificação: ${dados['id-sindicado'] || '________________'}</p>
                    
                    <h3>DECLARAÇÃO:</h3>
                    <p>${dados['resumo-fatos'] || 'Descrição dos fatos a serem declarados.'}</p>
                    
                    <div class="assinatura">
                        <div class="linha-assinatura"></div>
                        <strong>${dados['posto-encarregado']} ${dados['nome-encarregado']}</strong><br>
                        Encarregado da Sindicância
                        
                        <div class="linha-assinatura" style="margin-top: 40px;"></div>
                        <strong>${dados['nome-sindicado'] || '________________'}</strong><br>
                        Declarante
                    </div>
                `;
            }
            
            gerarRelatorioFinal(dados) {
                const tipo = dados['tipo-procedimento'] === 'IPM' ? 'Inquérito Policial Militar' : 
                           dados['tipo-procedimento'] === 'SD' ? 'Sindicância Disciplinar' : 
                           'Sindicância Investigativa';
                
                return `
                    <h1>RELATÓRIO FINAL</h1>
                    
                    <h3>I - OBJETIVO</h3>
                    <p>A presente ${tipo} foi instaurada por determinação da autoridade competente, por meio da Portaria nº ${dados['numero-portaria'] || '______'}, de ${this.formatarData(dados['data-portaria'], 'normal')}, com a finalidade de apurar os fatos descritos a seguir.</p>
                    
                    <h3>II - DILIGÊNCIAS REALIZADAS</h3>
                    <p>Durante a instrução do procedimento, foram realizadas as seguintes diligências:</p>
                    <ul style="margin-left: 20px; margin-bottom: 16px;">
                        <li>Oitiva dos envolvidos;</li>
                        <li>Análise de documentos pertinentes;</li>
                        <li>Solicitação de informações complementares;</li>
                        <li>Realização de perícias quando necessárias.</li>
                    </ul>
                    
                    <h3>III - FATOS APURADOS</h3>
                    <p>${dados['resumo-fatos'] || 'Descrição dos fatos apurados.'}</p>
                    
                    <h3>IV - CONCLUSÃO</h3>
                    <p>Salvo melhor juízo, este encarregado é do parecer que os fatos apurados [inserir conclusão: apresentam/não apresentam indícios de irregularidade].</p>
                    
                    <div class="assinatura">
                        <div class="linha-assinatura"></div>
                        <strong>${dados['posto-encarregado']} ${dados['nome-encarregado']}</strong><br>
                        ${dados['tipo-procedimento'] === 'IPM' ? 'Encarregado do Inquérito Policial Militar' : 'Sindicante'}<br>
                        CI: ${dados['id-encarregado'] || '______'}
                    </div>
                `;
            }
            
            gerarDocumentos() {
                if (!this.validarFormulario()) {
                    return;
                }
                
                const dados = this.obterDadosFormulario();
                
                this.documentosGerados = {
                    'termo-abertura': this.gerarTermoAbertura(dados),
                    'termo-declaracao': this.gerarTermoDeclaracao(dados),
                    'relatorio': this.gerarRelatorioFinal(dados)
                };
                
                this.previsualizarDocumento('termo-abertura');
                this.mudarAba('previa');
                this.mostrarToast('Documentos gerados com sucesso!', 'sucesso');
                this.atualizarHistorico();
            }
            
            previsualizarDocumento(tipoDocumento) {
                const preview = document.getElementById('previa-documento');
                if (this.documentosGerados[tipoDocumento]) {
                    preview.innerHTML = this.documentosGerados[tipoDocumento];
                } else {
                    preview.innerHTML = `
                        <p style="text-align: center; color: var(--pm-cinza); padding: 40px;">
                            <i class="fas fa-exclamation-triangle" style="font-size: 48px; margin-bottom: 20px; display: block; opacity: 0.3;"></i>
                            Documento não disponível. Gere os documentos primeiro.
                        </p>
                    `;
                }
            }
            
            exportarDocumento() {
                const tipoDoc = document.getElementById('selecionar-documento').value;
                if (!this.documentosGerados[tipoDoc]) {
                    this.mostrarToast('Nenhum documento selecionado para exportar', 'erro');
                    return;
                }
                
                const conteudo = this.documentosGerados[tipoDoc];
                const blob = new Blob([`
                    <!DOCTYPE html>
                    <html>
                    <head>
                        <meta charset="UTF-8">
                        <title>${tipoDoc.replace('-', ' ').toUpperCase()} - PMAM</title>
                        <style>
                            body { font-family: 'Times New Roman', Times, serif; margin: 40px; line-height: 1.6; }
                            h1 { text-align: center; margin-bottom: 40px; }
                            .linha-assinatura { border-top: 1px solid #000; width: 300px; margin: 60px auto 10px; }
                        </style>
                    </head>
                    <body>
                        ${conteudo}
                    </body>
                    </html>
                `], { type: 'text/html' });
                
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${tipoDoc}_${new Date().toISOString().split('T')[0]}.doc`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                this.mostrarToast('Documento exportado com sucesso!', 'sucesso');
            }
            
            carregarModelo(modeloId) {
                const modelo = this.modelos[modeloId];
                if (!modelo) return;
                
                // Preencher formulário
                Object.keys(modelo).forEach(campo => {
                    const elemento = document.getElementById(campo);
                    if (elemento) {
                        elemento.value = modelo[campo];
                    }
                });
                
                this.mostrarToast(`Modelo "${modeloId}" carregado com sucesso!`, 'sucesso');
                this.mudarAba('formulario');
            }
            
            carregarModeloDialog() {
                const modelo = prompt('Digite o nome do modelo (sindicancia-botelho, sindicancia-daivison, ipm-stanley):');
                if (modelo && this.modelos[modelo]) {
                    this.carregarModelo(modelo);
                } else if (modelo) {
                    this.mostrarToast('Modelo não encontrado', 'erro');
                }
            }
            
            limparFormulario() {
                if (confirm('Tem certeza que deseja limpar todos os campos do formulário?')) {
                    document.querySelectorAll('#aba-formulario input, #aba-formulario select, #aba-formulario textarea').forEach(input => {
                        if (input.id !== 'cidade') {
                            input.value = '';
                        }
                    });
                    this.configurarDatas();
                    this.mostrarToast('Formulário limpo com sucesso', 'sucesso');
                }
            }
            
            salvarRascunho() {
                const dados = this.obterDadosFormulario();
                const timestamp = new Date().toISOString();
                const chave = `pmam_rascunho_${timestamp}`;
                
                localStorage.setItem(chave, JSON.stringify(dados));
                this.mostrarToast('Rascunho salvo com sucesso', 'sucesso');
                this.atualizarHistorico();
            }
            
            autoSalvar() {
                if (this.config.autoSave) {
                    const dados = this.obterDadosFormulario();
                    localStorage.setItem('pmam_autosave', JSON.stringify(dados));
                }
            }
            
            carregarConfig() {
                const saved = localStorage.getItem('pmam_config');
                if (saved) {
                    this.config = { ...this.config, ...JSON.parse(saved) };
                }
                
                const autosave = localStorage.getItem('pmam_autosave');
                if (autosave && confirm('Deseja restaurar o último rascunho salvo?')) {
                    const dados = JSON.parse(autosave);
                    Object.keys(dados).forEach(campo => {
                        const elemento = document.getElementById(campo);
                        if (elemento && dados[campo]) {
                            elemento.value = dados[campo];
                        }
                    });
                }
            }
            
            atualizarHistorico() {
                const historicoDiv = document.getElementById('lista-historico');
                const rascunhos = [];
                
                for (let i = 0; i < localStorage.length; i++) {
                    const chave = localStorage.key(i);
                    if (chave.startsWith('pmam_rascunho_')) {
                        rascunhos.push({
                            chave,
                            data: new Date(chave.replace('pmam_rascunho_', ''))
                        });
                    }
                }
                
                if (rascunhos.length === 0) {
                    historicoDiv.innerHTML = `
                        <p style="text-align: center; color: var(--pm-cinza); padding: 20px;">
                            <i class="fas fa-history" style="font-size: 36px; margin-bottom: 16px; display: block; opacity: 0.3;"></i>
                            Nenhum documento gerado ainda
                        </p>
                    `;
                    return;
                }
                
                // Ordenar por data (mais recente primeiro)
                rascunhos.sort((a, b) => b.data - a.data);
                
                let html = '<div style="display: flex; flex-direction: column; gap: 12px;">';
                rascunhos.slice(0, 5).forEach(rascunho => {
                    const dataFormatada = rascunho.data.toLocaleDateString('pt-BR');
                    html += `
                        <div style="display: flex; justify-content: space-between; align-items: center; 
                                    padding: 12px; background: var(--pm-cinza-claro); border-radius: 6px;">
                            <div>
                                <strong>Rascunho de Documento</strong><br>
                                <small style="color: var(--pm-cinza);">${dataFormatada}</small>
                            </div>
                            <button onclick="sistema.carregarRascunho('${rascunho.chave}')" 
                                    style="background: var(--pm-azul); color: white; border: none; 
                                           padding: 6px 12px; border-radius: 4px; cursor: pointer;">
                                <i class="fas fa-upload"></i> Carregar
                            </button>
                        </div>
                    `;
                });
                html += '</div>';
                
                historicoDiv.innerHTML = html;
            }
            
            carregarRascunho(chave) {
                const dados = JSON.parse(localStorage.getItem(chave));
                if (dados) {
                    Object.keys(dados).forEach(campo => {
                        const elemento = document.getElementById(campo);
                        if (elemento && dados[campo]) {
                            elemento.value = dados[campo];
                        }
                    });
                    this.mostrarToast('Rascunho carregado com sucesso', 'sucesso');
                    this.mudarAba('formulario');
                }
            }
            
            mostrarToast(mensagem, tipo = 'sucesso') {
                const toast = document.getElementById('toast');
                const icone = toast.querySelector('i');
                const texto = document.getElementById('toast-mensagem');
                
                texto.textContent = mensagem;
                toast.className = 'toast';
                
                if (tipo === 'sucesso') {
                    toast.classList.add('toast-sucesso');
                    icone.className = 'fas fa-check-circle';
                } else if (tipo === 'erro') {
                    icone.className = 'fas fa-exclamation-circle';
                }
                
                toast.classList.add('mostrar');
                
                setTimeout(() => {
                    toast.classList.remove('mostrar');
                }, 3000);
            }
        }

        // Inicializar sistema quando a página carregar
        let sistema;
        document.addEventListener('DOMContentLoaded', () => {
            sistema = new SistemaPMAM();
            
            // Função global para carregar modelos
            window.carregarModelo = (modeloId) => sistema.carregarModelo(modeloId);
        });

        // Função global para o sistema
        window.sistema = sistema;
    </script>
</body>
</html>