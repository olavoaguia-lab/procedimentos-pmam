<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SISPRO-PMAM | Sistema de Procedimentos Administrativos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        :root {
            --executive-navy: #0f172a;
            --executive-gold: #c5a059;
            --executive-bg: #f8fafc;
        }

        body { 
            font-family: 'Inter', sans-serif; 
            background-color: var(--executive-bg);
            color: #1e293b;
        }

        .exec-header { 
            background: #ffffff;
            border-bottom: 2px solid #e2e8f0;
            padding: 1.5rem 3rem;
        }

        .step-pill {
            @apply flex items-center gap-3 px-6 py-3 rounded-full transition-all duration-300 font-semibold text-sm border-2;
        }
        .step-pill.active { @apply bg-slate-900 text-white border-slate-900 shadow-lg; }
        .step-pill.pending { @apply bg-white text-slate-400 border-slate-200; }

        .exec-card {
            @apply bg-white rounded-2xl border border-slate-100 shadow-xl p-8;
        }

        .input-exec {
            @apply w-full border-b-2 border-slate-200 bg-transparent py-3 px-1 focus:border-slate-900 outline-none transition-all text-sm;
        }

        .btn-primary { @apply bg-slate-900 text-white px-8 py-3 rounded-xl font-bold hover:bg-black transition-all shadow-md active:scale-95; }
        .btn-outline { @apply border-2 border-slate-900 text-slate-900 px-8 py-3 rounded-xl font-bold hover:bg-slate-50 transition-all; }

        .title-gold { font-family: 'Playfair Display', serif; color: var(--executive-gold); }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <header class="exec-header flex items-center justify-between sticky top-0 z-50">
        <div class="flex items-center gap-4">
            <img src="logo-pmam.png" alt="PMAM" class="h-14">
        </div>

        <div class="text-center">
            <h1 class="text-2xl font-black tracking-tighter text-slate-900">SISPRO-PMAM</h1>
            <p class="text-[10px] uppercase tracking-[0.3em] font-bold text-slate-400">Diretoria de Justiça e Disciplina</p>
        </div>

        <div>
            <button onclick="app.consultar()" class="bg-slate-100 hover:bg-slate-200 text-slate-700 px-6 py-2 rounded-full text-xs font-black transition-all border border-slate-200">
                <i class="fas fa-search mr-2"></i> CONSULTAR PROCEDIMENTOS
            </button>
        </div>
    </header>

    <nav class="max-w-5xl mx-auto w-full mt-10 px-6">
        <div class="flex justify-between items-center">
            <div id="step-1" class="step-pill active">
                <span class="w-6 h-6 rounded-full bg-yellow-500 text-white flex items-center justify-center text-[10px]">1</span>
                ESCOLHA O PROCEDIMENTO
            </div>
            <div class="h-[2px] flex-1 bg-slate-200 mx-4"></div>
            <div id="step-2" class="step-pill pending">
                <span class="w-6 h-6 rounded-full bg-slate-200 text-slate-500 flex items-center justify-center text-[10px]">2</span>
                QUALIFICAÇÃO
            </div>
            <div class="h-[2px] flex-1 bg-slate-200 mx-4"></div>
            <div id="step-3" class="step-pill pending">
                <span class="w-6 h-6 rounded-full bg-slate-200 text-slate-500 flex items-center justify-center text-[10px]">3</span>
                DOCUMENTAÇÃO
            </div>
            <div class="h-[2px] flex-1 bg-slate-200 mx-4"></div>
            <div id="step-4" class="step-pill pending">
                <span class="w-6 h-6 rounded-full bg-slate-200 text-slate-500 flex items-center justify-center text-[10px]">4</span>
                RELATÓRIO
            </div>
        </div>
    </nav>

    <main class="max-w-6xl mx-auto w-full p-10 flex-1">
        
        <section id="view-1" class="space-y-8">
            <div class="text-center mb-12">
                <h2 class="title-gold text-4xl mb-2">Inicie sua Instrução</h2>
                <p class="text-slate-400 font-light italic">Selecione o rito administrativo adequado para o caso.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div onclick="app.selectProc('IPM')" class="exec-card hover:border-slate-900 cursor-pointer transition-all group">
                    <div class="flex justify-between items-start mb-6">
                        <i class="fas fa-gavel text-3xl text-slate-300 group-hover:text-slate-900 transition-colors"></i>
                        <span class="text-[10px] font-bold text-slate-400">CRIMINAL/MILITAR</span>
                    </div>
                    <h3 class="text-xl font-bold text-slate-800">IPM</h3>
                    <p class="text-xs text-slate-500 mt-2">Inquérito Policial Militar para apuração de crimes.</p>
                </div>
                <div onclick="app.selectProc('Sindicância')" class="exec-card hover:border-slate-900 cursor-pointer transition-all group">
                    <div class="flex justify-between items-start mb-6">
                        <i class="fas fa-file-invoice text-3xl text-slate-300 group-hover:text-slate-900 transition-colors"></i>
                        <span class="text-[10px] font-bold text-slate-400">ADMINISTRATIVA</span>
                    </div>
                    <h3 class="text-xl font-bold text-slate-800">SINDICÂNCIA</h3>
                    <p class="text-xs text-slate-500 mt-2">Apuração de atos disciplinares ou fatos administrativos.</p>
                </div>
                <div onclick="app.selectProc('PAD')" class="exec-card hover:border-slate-900 cursor-pointer transition-all group">
                    <div class="flex justify-between items-start mb-6">
                        <i class="fas fa-landmark text-3xl text-slate-300 group-hover:text-slate-900 transition-colors"></i>
                        <span class="text-[10px] font-bold text-slate-400">CONSELHO</span>
                    </div>
                    <h3 class="text-xl font-bold text-slate-800">PAD / CONSELHOS</h3>
                    <p class="text-xs text-slate-500 mt-2">Procedimento Administrativo Disciplinar de ampla defesa.</p>
                </div>
            </div>
        </section>

        <section id="view-2" class="hidden space-y-10 animate-fade-in">
            <div class="exec-card">
                <h3 class="title-gold text-2xl mb-8">Dados da Instauração</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                    <div>
                        <label class="text-[10px] font-bold text-slate-400 uppercase">Número da Portaria</label>
                        <input type="text" id="portaria" class="input-exec" placeholder="Ex: 001/2024-SJD">
                    </div>
                    <div>
                        <label class="text-[10px] font-bold text-slate-400 uppercase">Data do Ato</label>
                        <input type="date" id="data-portaria" class="input-exec">
                    </div>
                    <div class="md:col-span-2">
                        <label class="text-[10px] font-bold text-slate-400 uppercase">Resumo da Acusação/Objeto</label>
                        <textarea id="objeto" class="input-exec h-24" placeholder="Descreva sucintamente o fato a ser apurado..."></textarea>
                    </div>
                </div>
            </div>

            <div class="flex gap-4">
                <button onclick="app.modalQualif('Encarregado')" class="btn-primary">ADICIONAR ENCARREGADO</button>
                <button onclick="app.modalQualif('Escrivão')" class="btn-primary">ADICIONAR ESCRIVÃO</button>
                <button onclick="app.modalQualif('Envolvido')" class="btn-outline">ADICIONAR ENVOLVIDO</button>
            </div>

            <div id="lista-qualificacao" class="grid grid-cols-1 md:grid-cols-3 gap-6"></div>
            
            <div class="flex justify-end pt-10">
                <button onclick="app.go(3)" class="btn-primary bg-yellow-600 hover:bg-yellow-700 px-16">AVANÇAR PARA DOCUMENTOS</button>
            </div>
        </section>

        <section id="view-3" class="hidden grid grid-cols-1 lg:grid-cols-2 gap-10">
            <div class="exec-card">
                <h4 class="font-bold text-slate-900 border-b pb-4 mb-6 italic">Modelos Padrão (Vínculo com Portaria)</h4>
                <div class="space-y-3" id="docs-padrao"></div>
            </div>
            <div class="exec-card">
                <h4 class="font-bold text-slate-900 border-b pb-4 mb-6 italic">Atos Diversos e Declarações</h4>
                <div class="space-y-3" id="docs-diversos"></div>
            </div>
        </section>

    </main>

    <div id="modal-qualif" class="fixed inset-0 bg-slate-900/80 hidden items-center justify-center z-[100] backdrop-blur-sm">
        <div class="bg-white w-full max-w-4xl rounded-3xl p-12 shadow-2xl">
            <h2 id="modal-title" class="title-gold text-3xl mb-10">Qualificação Técnica</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-8">
                <div class="md:col-span-2">
                    <label class="text-[10px] font-bold text-slate-400">NOME COMPLETO</label>
                    <input type="text" id="q-nome" class="input-exec uppercase">
                </div>
                <div>
                    <label class="text-[10px] font-bold text-slate-400">POSTO/GRAD OU CI</label>
                    <input type="text" id="q-posto" class="input-exec uppercase">
                </div>
                <div>
                    <label class="text-[10px] font-bold text-slate-400">IDADE</label>
                    <input type="number" id="q-idade" class="input-exec">
                </div>
                <div>
                    <label class="text-[10px] font-bold text-slate-400">NATURALIDADE</label>
                    <input type="text" id="q-nat" class="input-exec uppercase">
                </div>
                <div>
                    <label class="text-[10px] font-bold text-slate-400">PROFISSÃO</label>
                    <input type="text" id="q-prof" class="input-exec uppercase" value="POLICIAL MILITAR">
                </div>
                <div class="md:col-span-2">
                    <label class="text-[10px] font-bold text-slate-400">ENDEREÇO</label>
                    <input type="text" id="q-end" class="input-exec">
                </div>
            </div>
            <div class="flex justify-end gap-4 mt-12">
                <button onclick="app.closeModal()" class="text-slate-400 font-bold">CANCELAR</button>
                <button onclick="app.saveQualif()" class="btn-primary">SALVAR REGISTRO</button>
            </div>
        </div>
    </div>

    <script>
        class SISPRO_Elite {
            constructor() {
                this.data = { proc: '', portaria: '', qualificados: [], docs: {} };
                this.currentPapel = '';
            }

            go(step) {
                document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
                document.getElementById(`view-${step}`).classList.remove('hidden');
                
                document.querySelectorAll('.step-pill').forEach((p, idx) => {
                    if(idx + 1 === step) p.className = 'step-pill active';
                    else if(idx + 1 < step) p.className = 'step-pill border-slate-900 text-slate-900';
                    else p.className = 'step-pill pending';
                });

                if(step === 3) this.initDocs();
            }

            selectProc(p) { this.data.proc = p; this.go(2); }

            modalQualif(papel) {
                this.currentPapel = papel;
                document.getElementById('modal-title').innerText = `Qualificar ${papel}`;
                document.getElementById('modal-qualif').style.display = 'flex';
            }

            closeModal() { document.getElementById('modal-qualif').style.display = 'none'; }

            saveQualif() {
                const q = {
                    papel: this.currentPapel,
                    nome: document.getElementById('q-nome').value,
                    posto: document.getElementById('q-posto').value,
                    idade: document.getElementById('q-idade').value,
                    nat: document.getElementById('q-nat').value,
                    prof: document.getElementById('q-prof').value,
                    end: document.getElementById('q-end').value
                };
                this.data.qualificados.push(q);
                this.renderQualif();
                this.closeModal();
            }

            renderQualif() {
                const list = document.getElementById('lista-qualificacao');
                list.innerHTML = this.data.qualificados.map((q, i) => `
                    <div class="exec-card p-6 border-l-4 border-l-slate-900">
                        <span class="text-[9px] font-black text-yellow-600 uppercase">${q.papel}</span>
                        <h4 class="font-bold text-slate-800">${q.posto} ${q.nome}</h4>
                        <p class="text-[10px] text-slate-400 mt-1">${q.nat} | ${q.idade} anos</p>
                    </div>
                `).join('');
            }

            initDocs() {
                const padrao = ["Autuação", "Termo de Abertura", "Designação do Escrivão", "Compromisso", "Encerramento"];
                const diversos = ["Juntada", "Ofícios", "Termos", "Declarações", "Despachos"];

                document.getElementById('docs-padrao').innerHTML = padrao.map(d => this.docRow(d)).join('');
                document.getElementById('docs-diversos').innerHTML = diversos.map(d => this.docRow(d)).join('');
            }

            docRow(label) {
                return `<div class="p-4 bg-slate-50 rounded-xl flex justify-between items-center hover:bg-white border border-transparent hover:border-slate-200 transition-all cursor-pointer">
                    <span class="text-sm font-semibold text-slate-700">${label}</span>
                    <i class="fas fa-edit text-slate-300"></i>
                </div>`;
            }

            consultar() { alert("Acessando Banco de Dados PMAM..."); }
        }

        const app = new SISPRO_Elite();
    </script>
</body>
</html>
